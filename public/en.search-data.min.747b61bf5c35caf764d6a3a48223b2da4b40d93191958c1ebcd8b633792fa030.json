[{"id":0,"href":"/docs/example/moniroting_error/installmonitoring_error/","title":"Ошибки установки Мониторинга","section":"Неисправности Мониторинга","content":" Ошибки установки Мониторинга # E: Невозможно исправить ошибки: У вас зафиксированы сломанные пакеты. # Вероятно, во время установки пакетов произошло прерывание установки, например, выключили сервер.\nДля решения обратитесь к документации ОС. Если не помогло, удалите и установите пакеты вручную.\nОшибка “Timeout error. Check docker logs. Then restart the installation.” # Ошибка возникает, если неверно указана переменная MON_HOSTNAME.\nДля решения, проверьте верность IP адреса или доменного имени указанного при установке. Укажите верные значения и запустите установку еще раз.\nКонфликт адресов при установке системы # Если после установки системы произошел разрыв соединения и к серверу нельзя подключится, то возможно это конфликт адресов. Для функционирования системы используется внутренняя сеть docker c пулом адресов 10.28.32.0/26, если есть пересечение с вашей реальной локальной сетью, то выделите пул адресов для функционирования системы.\nМожет произойти потеря связи с сервером по shh, если конфликт сетей обнаружен во время или после установки. Для решения проблемы, подключитесь к серверу через консоль гипервизора.\nОстановите все контейнеры\nЕсли установлен Мониторинг:\ncd /opt/printum\rdocker-compose down\rЕсли установлен ПринтМененджер\ncd /opt/printmanager/\rdocker-compose down\rПроверьте что существует файл daemon.json в директории /etc/docker/ и создайте, если его нет. Откройте файл с помощью редактора\n$ sudo nano /etc/docker/daemon.json\rИ добавьте или отредактируйте следующие строчки:\n{\r\u0026quot;default-address-pools\u0026quot;: [{\r\u0026quot;base\u0026quot;: \u0026quot;х.х.х.х/х\u0026quot;,\r\u0026quot;size\u0026quot;: 26\r}]\r}\rГде: \u0026ldquo;base\u0026rdquo;: \u0026ldquo;х.х.х.х/х\u0026rdquo; — выделенный пул адресов.\nПерезапустите службу докера\n$ sudo systemctl restart docker\rЗапустите докер-контейнеры:\ncd /opt/printum\rdocker-compose up -d\rcd /opt/printmanager\rdocker-compose up -d\rПри запуске контейнеров может появиться ошибка:\nCreating network \u0026quot;printum_default\u0026quot; with the default driver\rERROR: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network\rТогда вернитесь к шагу 3 и выберите другой диапазон адресов.\nПроверьте, что контейнеры получили нужные адреса командой:\nsudo docker ps -q | sudo xargs -n 1 docker inspect -f '{{ .Name }}: {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'\rЕсли о проблеме известно до установки системы, то выполните инструкцию игнорируя пункт 1 и 5.\n"},{"id":1,"href":"/docs/example/","title":"Устранение неисправностей","section":"Docs","content":" Устранение неисправностей # Ниже описаны распространенные неисправности во время использования системы и их решения. Если среди них нет вашей проблемы, перейдите к разделу “Обращение в техническую поддержку” .\nНеисправности Мониторинга\nПроблемы с установкой, нахождением устройств, запчастями и счетчиками. Неисправности ПринтМененджера\nПроблемы с установкой, авторизацией,правилами печати и отдельными настройками ПМ. Проблемы с печатью\nОбобщенный список ошибок печати/копирования: артефакты, лишнии копии, медленная печать. Ошибки среды\nпроблемы при использовании конкретной ОС или Docker\u0026rsquo;a. Ошибки устройств\nВозникаемые на конкретных МФУ. Неисправности клиента ПМ и бесклиентской печати\nОшибки при установке или отправке файла в очередь печати. Неисправности локального агента\nОшибки установки и передачи данных счетчика/запчастей. Ошибки печати через офисные программы\nПроблемы возникающие при печати через офисные приложения (Microsoft Office, LibreOffce). Неисправности отказоустойчивой конфигурации\nУстановка, включение и выключение нод, проблемы печати. "},{"id":2,"href":"/docs/example/moniroting_error/updatemonitoring_error/","title":"Ошибки обновления Мониторинга","section":"Неисправности Мониторинга","content":" Ошибки обновления Мониторинга # error while removing network: network printum_defailt id \u0026lt;\u0026hellip;\u0026gt; has active endpoints # Означает, что невозможно удалить внутреннюю сеть docker, так как она занята запущенным контейнером. Для решения перезагрузите сервер и запустите обновление повторно.\n"},{"id":3,"href":"/docs/example/moniroting_error/findprinter_error/","title":"Обнаружены не все печатающие устройства","section":"Неисправности Мониторинга","content":" Обнаружены не все печатающие устройства # Проверьте, что IP-адрес принтера указан верно в настройках локации или входит в указанные диапазоны.\nДля этого откройте панель администратора мониторинга, выберите Инвентаризация \u0026gt; Локации. Откройте нужную локацию и убедитесь, что нужный IP-адрес указан в поле “IP-адреса устройств” и не указан в поле “Исключить IP-адреса”.\nПроверьте, что агент мониторинга опрашивает локацию с устройствами. Для этого перейдите во вкладку “Настройки” \u0026gt; “Общие настройки” \u0026gt; “Модули” и выберите вариант “Сетевой агент”.\nЛокация с устройствами должна быть отмечена чек-боксом или входить в другую локацию, отмеченную чек-боксом.\nПроверьте доступность принтера по его ip-адресу в сети. Для этого на ПК, находящемся в одной сети с принтером, откройте браузер и укажите в адресной строке ip-адрес принтера.\nЕсли принтер отвечает по указанному в настройках локации ip-адресу, проверьте, включена ли на принтере передача данных по протоколу SNMP.\nЕсли нет, необходимо включить.\nПроверьте, отвечают ли принтеры на запросы и отдают ли информацию по snmpwalk по командам:\nsnmpwalk -v 2c -c public printer-ip-address\rили\nsnmpwalk -v 1 -c public printer-ip-address\rЕсли принтеры не отвечают на команды, следует откорректировать настройки принтеров и включить передачу данных по протоколу SNMP.\nЕсли нужный ip-адрес указан в настройках локаций, принтер по нему отвечает и в настройках включена передача данных по протоколу SNMP, вероятно, потребуется настройка SNMP параметров для данной модели. Сделайте необходимые настройки или обратитесь в техническую поддержку.\nПри обращении в техподдержку в запросе также укажите ошибки идентификации по этому устройству. Чтобы их посмотреть, перейдите в “Инвентаризация” \u0026gt; “Устройства”, найдите нужное устройство, вбив ip-адрес в строку поиска, скопируйте данные из столбца “Ошибки идентификации”.\nДля случаев, когда устройств много и необходимо проверить на каких включена или выключена передача данных по SNMP есть консольная приложение printer.py. Инструкция по его использованию в разделе “Приложение printer.py для поиска устройств”.\n"},{"id":4,"href":"/docs/example/moniroting_error/printerpy_readmu/","title":"Приложение printer.py для поиска устройств","section":"Неисправности Мониторинга","content":" Приложение printer.py для поиска устройств # Для работы на сервере требуется запросить у службы технической поддержки файл printer_scan.py. Перед использованием нужно установить библиотеку nmap и pandas.\nПеренесите консольное приложение printer_scan.py на сервер в любое место.\nЗайдите в Личный кабинет, в раздел “Устройства”.\nВыберите необходимую вам локацию и нажмите кнопку “Excel”.\nПолученный отчет переименуйте в “Devices.xlsx” и перенесите на сервер.\nИз папки с приложением (из шага 1) введите команду python3 printer_scan.py\nПриложение запросит IP-адреса. Их можно ввести диапазоном или подсетью.\nПрограмма просканирует сеть и выведет все доступные устройства (принтеры, роутеры, устройства сети) в 4 группы:\nIPS that are up – общий список откликнувшихся адресов. Checked as printers – устройства отмеченные как принтеры. Doubfull devices with no snmp – устройства с выключенным SNMP. Not printers – устройства не являющийся принтерами. Появится окно выбора места для отчета о работе программы.\nПриложение запросит о необходимости сравнения списков. Введите “y” и укажите полный путь до файла.\nПриложение сравнит найденные в Личном кабинете устройства и свой список. Выведет в консоль те принтеры, которые не были найдены в Личном кабинете.\nПриложение сохранит отчеты в папке указанной на шаге 8. Файлы будут в формате csv с названиями:\n\u0026rsquo;netscan_with_snmp.csv\u0026rsquo; — принтеры с включенным SNMP. ‘netscan_without_snmp.csv\u0026rsquo; — принтеры с выключенным SNMP. \u0026rsquo;not_found_in_monitoring.csv\u0026rsquo; — не найденные в мониторинге. "},{"id":5,"href":"/docs/example/support_request/","title":"Обращение в техническую поддержку","section":"Устранение неисправностей","content":" Обращение в техническую поддержку # Для получения качественной и быстрой помощи в обращении необходимо указать: версии всех компонентов системы (Мониторинг, ПринтМененджера, клиента ПМ) и собрать логи.\nОпределение номера версии Мониторинга и ПринтМененджера # В терминале сервера введите команды:\nМониторинг cat /opt/printum/.version ПринтМененджер cat /opt/printmanager/.version Определение версии клиента ПМ # Перейдите в папку с клиентом ПМ : C:\\Program Files\\printum\\printmanager_client\\\nОткройте свойства файла as_service.exe\nПерейдите во вкладку “Подробно”. В графе “Версия файла” указана версия программы.\nРабота с логами # Для отправки понадобятся логи всех компонентов системы участвующих в проблеме.\nСбор логов Мониторинга и ПринтМененджера # Сбор логов по запросу технической поддержки Принтум.\nДля сбора логов по установленной системе введите команды, указанные ниже.\nЕсли установлен Мониторинг и ПринтМенеджер или только Мониторинг: bash /opt/printum/logs.sh\nЕсли установлен только ПринтМенеджер: bash /opt/printmanager/logs.sh\nПосле запуска команды вы увидите процесс сбора логов, который завершится сообщением типа:\nЛоги успешно собраны и сохранены в /путь к папке/ALL_LOGS/logs-2023-12-06-17-14-44.tar.gz\nЛоги будут лежать в папке ALL_LOGS в архиве с датой и временем. При многократном запуске команды будут формироваться новые архивы.\nВ системе можно настроить логирование в Loki. Для этого обратитесь к разделу “Настройка логирования в Loki “\nСбор логов установки клиента ПМ # При установке клиента ПринтМененджера создается три лога:\ninstall.log — в папке запуска команды. service_install_time_date.log — В папке C:\\Program Files\\printum\\ . driver_install_time_date.log — В папке C:\\Program Files\\printum\\ Сбор логов работы клиента ПМ # Нажмите комбинацию клавиш Win+R и в появившемся окне введите “eventvwr”.\nОткроется окно Просмотра событий. В левой боковой панели выберите “Журнал Windows”.\nВыберите подраздел “Приложение”.\nС зажатой клавишей shift выделите все записи с источником “Print Manager Client”.\nНажмите правую кнопку мыши, выберите “Копировать” и “Копировать сведения как текст”.\nВставьте скопированное в текстовый файл.\n"}]