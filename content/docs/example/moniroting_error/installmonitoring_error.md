---
weight: 1
title: "Ошибки установки Мониторинга"
--- 

# Ошибки установки Мониторинга

## E: Невозможно исправить ошибки: У вас зафиксированы сломанные пакеты.

Вероятно, во время установки пакетов произошло прерывание установки, например, выключили сервер.

Для решения обратитесь к документации ОС. Если не помогло, удалите и установите пакеты вручную. 

## Ошибка “Timeout error. Check docker logs. Then restart the installation.”
Ошибка возникает, если неверно указана переменная MON_HOSTNAME.

Для решения, проверьте верность IP адреса или доменного имени указанного при установке. Укажите верные значения и запустите установку еще раз.

## Конфликт адресов при установке системы
Если после установки системы произошел разрыв соединения и к серверу нельзя подключится, то возможно это конфликт адресов. Для функционирования системы используется внутренняя сеть docker c пулом адресов 10.28.32.0/26, если есть пересечение с вашей реальной локальной сетью, то выделите пул адресов для функционирования системы.

Может произойти потеря связи с сервером по shh, если конфликт сетей обнаружен во время или после установки. Для решения проблемы, подключитесь к серверу через консоль гипервизора.

Остановите все контейнеры

Если установлен Мониторинг:

    cd /opt/printum
    docker-compose down

Если установлен ПринтМененджер

    cd /opt/printmanager/
    docker-compose down

Проверьте что существует файл daemon.json в директории /etc/docker/ и создайте, если его нет.
Откройте файл с помощью редактора

    $ sudo nano /etc/docker/daemon.json

И добавьте или отредактируйте следующие строчки:

    {
    "default-address-pools": [{
        "base": "х.х.х.х/х",
        "size": 26
    }]
    }

Где:
    "base": "х.х.х.х/х" — выделенный пул адресов.

Перезапустите службу докера 

    $ sudo systemctl restart docker


Запустите докер-контейнеры:

    cd /opt/printum
    docker-compose up -d
    cd /opt/printmanager
    docker-compose up -d

При запуске контейнеров может появиться ошибка:

    Creating network "printum_default" with the default driver
    ERROR: could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network

Тогда вернитесь к шагу 3 и выберите другой диапазон адресов. 

Проверьте, что контейнеры получили нужные адреса командой:

    sudo docker ps -q | sudo xargs -n 1 docker inspect -f '{{ .Name }}: {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'

Если о проблеме известно до установки системы, то выполните инструкцию игнорируя пункт 1 и 5. 
